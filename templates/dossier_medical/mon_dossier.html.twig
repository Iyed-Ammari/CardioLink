{% extends 'base.html.twig' %}

{% block body %}

<h2>üìã Mon Dossier M√©dical</h2>

{% if dossier %}

    {% if dossier.IMC and dossier.IMC > 30 %}
    <div style="padding:15px; border-radius:12px; margin-bottom:20px; background:#ffedd5; border-left:5px solid orange;">
        ‚ö†Ô∏è <strong>Attention :</strong> Votre IMC est de <strong>{{ dossier.IMC }}</strong>, ce qui indique une <strong>ob√©sit√©</strong>. 
        Cela augmente significativement votre risque cardiaque. Consultez un m√©decin.
    </div>
    {% endif %}

    {% set risque = dossier.risqueCardiaque %}
    <div style="padding:15px; border-radius:12px; margin-bottom:20px;
        background: {{ risque == 'CRITIQUE' ? '#fee2e2' : (risque == '√âLEV√â' ? '#ffedd5' : (risque == 'MOD√âR√â' ? '#fef9c3' : '#dcfce7')) }};">
        <strong>‚öïÔ∏è Risque Cardiaque :</strong>
        <span style="font-weight:800; color: {{ risque == 'CRITIQUE' ? 'red' : (risque == '√âLEV√â' ? 'orange' : (risque == 'MOD√âR√â' ? '#ca8a04' : 'green')) }};">
            {{ risque }}
        </span>
        {% if dossier.IMC %}
            &nbsp;&nbsp; | &nbsp;&nbsp; <strong>IMC :</strong> {{ dossier.IMC }}
        {% endif %}
    </div>

    <table border="1">
        <tr><th>Groupe Sanguin</th><td>{{ dossier.groupeSanguin }}</td></tr>
        <tr><th>Ant√©c√©dents</th><td>{{ dossier.antecedents ?? '-' }}</td></tr>
        <tr><th>Allergies</th><td>{{ dossier.allergies ?? '-' }}</td></tr>
        <tr><th>Poids</th><td>{{ dossier.poids ? dossier.poids ~ ' kg' : '-' }}</td></tr>
        <tr><th>Taille</th><td>{{ dossier.taille ? dossier.taille ~ ' cm' : '-' }}</td></tr>
        <tr><th>Tension</th><td>{{ dossier.tensionSystolique ? dossier.tensionSystolique ~ '/' ~ dossier.tensionDiastolique ~ ' mmHg' : '-' }}</td></tr>
        <tr><th>Fr√©quence Cardiaque</th><td>{{ dossier.frequenceCardiaque ? dossier.frequenceCardiaque ~ ' bpm' : '-' }}</td></tr>
    </table>

    <br>
    <a href="{{ path('app_mon_dossier_edit') }}" style="background:linear-gradient(90deg,#F82239,#2F60F5); color:#fff; padding:10px 20px; border-radius:12px; text-decoration:none; font-weight:800;">
        ‚úèÔ∏è Modifier mon dossier
    </a>
    &nbsp;
    <a href="{{ path('app_mon_dossier_pdf') }}" style="background:linear-gradient(90deg,#F82239,#2F60F5); color:#fff; padding:10px 20px; border-radius:12px; text-decoration:none; font-weight:800;">
        üìÑ T√©l√©charger PDF
    </a>

{% else %}
    <p>Vous n'avez pas encore de dossier m√©dical.</p>
    <a href="{{ path('app_mon_dossier_edit') }}" style="background:linear-gradient(90deg,#F82239,#2F60F5); color:#fff; padding:10px 20px; border-radius:12px; text-decoration:none; font-weight:800;">
        ‚ûï Cr√©er mon dossier
    </a>
{% endif %}

{% endblock %}