<h1>Mes Commandes</h1>

{% for label, msgs in app.flashes %}
  {% for m in msgs %}
    <div style="padding:10px; margin:10px 0; border:1px solid #ccc;">
      <b>{{ label }}</b> — {{ m }}
    </div>
  {% endfor %}
{% endfor %}

<table border="1" cellpadding="8" cellspacing="0" style="width:100%; border-collapse:collapse;">
  <thead>
  <tr>
    <th>ID</th><th>Date</th><th>Statut</th><th>Total</th><th>Actions</th>
  </tr>
  </thead>
  <tbody>
  {% for c in commandes %}
    <tr>
      <td>{{ c.id }}</td>
      <td>{{ c.dateCommande|date('Y-m-d H:i') }}</td>
      <td>{{ c.statut }}</td>
      <td>{{ c.montantTotal }}</td>
      <td>
        {% if c.statut in ['EN_ATTENTE_PAIEMENT','PANIER'] %}
          <form method="post" action="{{ path('patient_commande_cancel', {id: c.id}) }}"
                onsubmit="return confirm('Annuler cette commande ?');">
            <button type="submit">Annuler</button>
          </form>
        {% else %}
          -
        {% endif %}
      </td>
    </tr>
  {% else %}
    <tr><td colspan="5">Aucune commande.</td></tr>
  {% endfor %}
  </tbody>
</table>

<hr>
<a href="{{ path('patient_panier_show') }}">➡️ Retour panier</a>
